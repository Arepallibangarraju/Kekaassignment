document.addEventListener("DOMContentLoaded", function () {
    loadTasks();
});

function addTask() {
    const title = document.getElementById("title").value;
    const description = document.getElementById("description").value;
    const dueDate = document.getElementById("due-date").value;
    const priority = document.getElementById("priority").value;
    const category = document.getElementById("category").value;

    const task = {
        title: title,
        description: description,
        dueDate: dueDate,
        priority: priority,
        category: category,
        status: "New"
    };

    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    tasks.push(task);
    localStorage.setItem("tasks", JSON.stringify(tasks));

    loadTasks();

    document.getElementById("title").value = "";
    document.getElementById("description").value = "";
    document.getElementById("due-date").value = "";
    document.getElementById("priority").value = "Low";
    document.getElementById("category").value = "";
}

function updateTaskStatus(index, newStatus) {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    tasks[index].status = newStatus;
    localStorage.setItem("tasks", JSON.stringify(tasks));

    loadTasks();
}

function deleteTask(index) {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    tasks.splice(index, 1);
    localStorage.setItem("tasks", JSON.stringify(tasks));

    loadTasks();
}

function loadTasks() {
    const taskList = document.getElementById("task-list");
    taskList.innerHTML = "";

    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    tasks.forEach((task, index) => {
        const taskItem = document.createElement("li");
        taskItem.className = "task";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = task.status === "Completed";
        checkbox.addEventListener("change", () => {
            updateTaskStatus(index, checkbox.checked ? "Completed" : "In Progress");
        });

        const taskDetails = document.createElement("div");
        taskDetails.className = "task-details";
        taskDetails.innerHTML = `<strong>${task.title}</strong><br>${task.description}<br>Due Date: